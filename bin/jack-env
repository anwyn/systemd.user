#!/bin/sh

doexport=
if [ "$1" = "--export" ]
then
    doexport=true
    shift
fi

JACK_ENV_FILE=${1:-~/.config/environment.d/20-jack.conf}
for parm in rate nperiods period device; do
    name=JACK_$(echo $parm | tr 'a-z' 'A-Z')
    value=$(/usr/bin/jack_control dp | grep -e "^\ *${parm}:" | sed 's/.*:\(.*\))$/\1/')   
    echo $name="$value"
    test "$doexport" = "true" && /bin/systemctl --user set-environment $name="$value" >/dev/null 2>&1
done > ${JACK_ENV_FILE}



